#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/types.h>
#include <sys/stat.h>
#include <unistd.h>
#include <fcntl.h>

int main(int argc, char** argv) {
    char* atis = argv[0];
    int atisOpen = open("atis.txt", 0666);
    if (atisOpen == -1) {
        printf("Error during the opening of atis, end of the task.");
        exit(-1);
    }
    int creerLock = creat("lock.txt", 0666);
    if (creerLock == -1) {
        printf("Error during the creation of lock.txt, end of task.");
        exit(-2);

    }
    int atisWrite = write(atisOpen, atis, sizeof(atis));
    if (atisWrite == -1) {
        printf("Error during the writing in atis, end of the task.");
        exit(-3);
    }
    close(atisOpen);
    unlink("lock.txt");
    return 0;



}

